<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

   
    <link rel="stylesheet" href="./style.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" href="./icon-192x192.png" type="image/png">
    <link rel="apple-touch-icon" href="./icon-192x192.png">
     

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="AI Recipe">

    <title>Ø´Ùˆ Ø¹Ø§Ù…Ù„ÙŠ Ø£ÙƒÙ„ØŸ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        @font-face {
            font-family: 'Amiri';
            src: url('./J7aRnpd8CGxBHpUrtLMA7w.woff2') format('truetype');
            font-weight: 400;
            font-style: normal;

        }

         @font-face {
            font-family: 'Amiri';
            src: url('./J7aRnpd8CGxBHpUutLM.woff2') format('truetype');
            font-weight: 700;
            font-style: normal;

        }

        @font-face {
            font-family: 'Extended Kufic';
            src: url('./J7aRnpd8CGxBHpUgtLMA7w.woff2') format('truetype');
            font-weight: bold;
            font-style: normal;
        }


         @font-face {
            font-family: 'Extended Kufic';
            src: url('./J7acnpd8CGxBHp2VkaY6zp5yGw.woff2') format('woff2'); /* ğŸ¥‡ Ø§Ù„Ø£ÙØ¶Ù„ ÙˆØ§Ù„Ø£Ø³Ø±Ø¹ */
            font-weight: bold;
            font-style: normal;
}

         @font-face {
            font-family: 'Sans-Serif';
            src: url('./Sans-Serif-Regular.ttf') format('truetype');
            font-weight: bold;
            font-style: normal;
        }
         @font-face {
            font-family: 'Sans-Serif';
            src: url('./Sans-Serif-Bold.ttf') format('truetype');
            font-weight: bold;
            font-style: normal;
        }

        @font-face {
             font-family: 'Segoe UI';
             src: url('./Segoe UI-Regular.ttf') format('truetype');
             font-weight: normal;
}
        @font-face {
             font-family: 'Segoe UI';
             src: url('./Segoe%20UI-Bold.ttf') format('truetype');
             font-weight: bold;
}
        .app-frame {
            width: 100%;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
        }

        @media (min-width: 640px) {
            .app-frame {
                padding: 20px;
            }
        }

        .main-card {
            width: 100%;
            max-width: 480px;
            min-height: 100vh;
            background: linear-gradient(180deg, #1e3a5f 0%, #0d2137 100%);
            border-radius: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        @media (min-width: 640px) {
            .main-card {
                min-height: auto;
                height: 90vh;
                max-height: 900px;
                border-radius: 32px;
            }
        }

        .image-section {
            flex: 1;
            min-height: 200px;
            background: url('hello.png') center center / cover no-repeat;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .image-section::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom,
                rgba(0,0,0,0) 0%,
                rgba(0,0,0,0.2) 40%,
                rgba(0,0,0,0.7) 100%);
            z-index: 1;
        }

        .welcome-content {
            position: relative;
            z-index: 2;
            padding: 30px 25px;
            text-align: center;
        }

        .welcome-title {
            /*margin-top: 60px;*/
            font-size:2.4rem;
            font-weight: bold;
            color: #fff;
            text-shadow: 2px 2px 15px rgba(0, 0, 0, 0.5);
            font-family: 'Amiri', serif;
        }

        @media (min-width: 640px) {
            .welcome-title {
             font-size: 2.4rem;
            }
        }

        .enter-btn {
            margin-top: 4px; /* ÙŠÙ…ÙƒÙ†Ùƒ Ø²ÙŠØ§Ø¯Ø© Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø£Ùˆ ØªÙ‚Ù„ÙŠÙ„Ù‡Ø§ Ø­Ø³Ø¨ Ø§Ù„Ø±ØºØ¨Ø© */
            background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
            color: #000;
            font-size: 2.25rem;
            font-weight: bold;
            font-family: 'Extended Kufic', 'Amiri', serif;
            padding: 16px 65px;
            border: 3px solid; /* ØªØ­Ø¯ÙŠØ¯ Ø³Ù…Ø§ÙƒØ© Ø§Ù„Ø¥Ø·Ø§Ø± ÙˆÙ†ÙˆØ¹Ù‡ */
            border-color: #f355b4; /* Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø®Ø¶Ø± (ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ±Ù‡) */
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 30px rgba(74, 222, 128, 0.4);
        }

        .enter-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 40px rgba(74, 222, 128, 0.5);
        }

        .enter-btn:active {
            transform: translateY(0);
        }

        .lang-section {
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
        }

        .lang-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            max-width: 350px;
            margin: 0 auto;
        }

        .lang-btn {
            padding: 14px 20px;
            font-size: 1.05rem;
            font-weight: 600;
            border: none;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: #000;
        }

        .lang-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(34, 197, 94, 0.4);
        }

        .lang-btn.active {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: #fff;
        }

        .lang-btn:disabled {
            opacity: 0.7;
            cursor: wait;
        }

#disclaimer-modal {
    display: none;
    position: fixed;
    z-index: 10000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.8); /* Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ†Ø© Ù„Ù„ØªØ±ÙƒÙŠØ² */
}

.modal-content {
    background-color: #FF9800; /* Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ */
    color: #004D40; /* Ø£Ø®Ø¶Ø± ØºØ§Ù…Ù‚ */
    position: absolute;

    /* Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§ Ù„Ù†Ù‚Ù„Ù‡ Ù„Ù„Ø£Ø³ÙÙ„ */
    bottom: 20px; /* Ø§Ù„Ù…Ø³Ø§ÙØ© Ù…Ù† Ø§Ù„Ø­Ø§ÙØ© Ø§Ù„Ø³ÙÙ„ÙŠØ© */
    left: 50%;
    transform: translateX(-50%); /* ØªØ­Ø±ÙŠÙƒ Ù„Ù„ÙŠØ³Ø§Ø± Ø¨Ù†Ø³Ø¨Ø© 50% Ù…Ù† Ø¹Ø±Ø¶Ù‡ ÙÙ‚Ø· Ù„ÙŠØªÙˆØ³Ø· Ø£ÙÙ‚ÙŠØ§Ù‹ */

    /* Ø¶Ø¨Ø· Ø§Ù„Ø¹Ø±Ø¶ */
    width: 90%;
    max-width: 450px;

    padding: 25px;
    box-sizing: border-box;
    border-radius: 15px;
    text-align: center;
    direction: rtl;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

#disc-title {
    margin-top: 0;
    font-size: 1.4rem;
    border-bottom: 2px solid #004D40;
    padding-bottom: 10px;
}

#disc-body {
    font-size: 1.1rem;
    bold
    line-height: 1.5;
    margin: 20px 0;
}

#disc-btn {
    background-color: #004D40;
    color: #FF9800;
    border: none;
    padding: 12px 0;
    width: 100%; /* Ø§Ù„Ø²Ø± ÙŠØ£Ø®Ø° Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */
    border-radius: 8px;
    font-weight: bold;
    font-size: 1.3rem;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.2);
}

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /* Ø´Ø±ÙŠØ· Ø§Ù„ÙˆØ¬Ø¨Ø§Øª Ø§Ù„Ø³ÙÙ„ÙŠ                                          */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        .bottom-bar {
            background: linear-gradient(180deg, #0d2137 0%, #091828 100%);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .ticker-wrapper {
            overflow: hidden;
            background: rgba(0, 0, 0, 0.3);
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            direction: ltr !important;
            unicode-bidi: bidi-override;
        }

        .ticker-track {
            display: flex;
            align-items: center;
            width: max-content;
            will-change: transform;
            direction: ltr !important;
        }

        .ticker-track.rtl-scroll {
            animation: scroll-rtl var(--ticker-duration, 60s) linear infinite;
        }

        @keyframes scroll-rtl {
            0% { transform: translateX(-50%); }
            100% { transform: translateX(0%); }
        }

        .ticker-track.ltr-scroll {
            animation: scroll-ltr var(--ticker-duration, 60s) linear infinite;
        }

        @keyframes scroll-ltr {
            0% { transform: translateX(0%); }
            100% { transform: translateX(-50%); }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /* Ø¹Ù†ØµØ± Ø§Ù„ÙˆØ¬Ø¨Ø© ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ·                                       */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        .meal-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
            white-space: nowrap;
            flex-shrink: 0;
            unicode-bidi: plaintext;
            padding: 10px 18px;
            background: linear-gradient(135deg, rgba(74, 222, 128, 0.1) 0%, rgba(34, 197, 94, 0.05) 100%);
            border-radius: 16px;
            margin: 0 5px;
            border: 1px solid rgba(74, 222, 128, 0.2);
            min-width: 280px;
        }

        /* ğŸ›‘ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© ğŸ›‘ */

        /* ---------------------------------------------------- */
        /* 1. Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„: [Ø§Ù„Ø³Ø¹Ø±Ø§Øª] [Ø§Ù„ÙƒØ±Ø¨ÙˆÙ‡ÙŠØ¯Ø±Ø§Øª] [Ø§Ù„Ø§Ø³Ù…] */
        /* ØªÙ… Ø¹ÙƒØ³ Ø§Ù„Ù€ order: Ø§Ù„Ø³Ø¹Ø±Ø§Øª (3->1)ØŒ Ø§Ù„Ø§Ø³Ù… (1->3) */
        /* ---------------------------------------------------- */
        .meal-header {
    /* ÙŠØ¬Ø¨ ØªÙØ¹ÙŠÙ„ Flexbox Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø²Ø§Ø­Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© */
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        flex-wrap: nowrap
        }
        .meal-name-primary{
         color: #ff0000; /* Ù…Ø«Ø§Ù„: Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø­Ù…Ø± */
         font-weight: bold;
         }
        .meal-name-repeat {
         color: #007bff; /* Ù…Ø«Ø§Ù„: Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø²Ø±Ù‚ */
         font-weight: bold;
        }
    /* ØªØ¯ÙØ¹ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ± Ø¥Ù„Ù‰ Ø£Ù‚ØµÙ‰ Ø§Ù„Ø·Ø±Ù Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„ Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø³Ø·Ø± */
        .meal-name-ticker {
            color: #e9e4b7;
            font-weight: bold;
            font-size: 1rem;
            unicode-bidi: plaintext;
        }

        .meal-calories-main {
            display: flex;
            align-items: center;
            gap: 4px;
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.25) 0%, rgba(220, 38, 38, 0.15) 100%);
            padding: 4px 10px;
            border-radius: 12px;
            border: 1px solid rgba(239, 68, 68, 0.3);
       }
           .calories-icon {
            font-size: 0.8rem;
            line-height: 1;
        }

           .calories-value {
            color: #f87171;
            font-weight: bold;
            font-size: 0.8rem;
        }

           .calories-unit {
            color: rgba(248, 113, 113, 0.7);
            font-size: 0.8rem;
        }

        /* ---------------------------------------------------- */
        /* 2. Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ: [Ø§Ù„Ù†Øµ Ø§Ù„ØªÙˆØ¶ÙŠØ­ÙŠ] [Ø§Ù„Ø¯Ù‡ÙˆÙ†] [Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ†] */
        /* ØªÙ… Ø¹ÙƒØ³ Ø§Ù„Ù€ order: Ø§Ù„Ù†Øµ (3->1)ØŒ Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ† (1->3) */
        /* ---------------------------------------------------- */
        .meal-nutrition-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            direction: rtl;
            gap: 10px;
            padding: 0;
        }

        .meal-nutrition-row .nutrition-info-text-start {
            order: 1; /* ğŸ›‘ Ø£Ù‚ØµÙ‰ Ø§Ù„ÙŠØ³Ø§Ø± */
            white-space: nowrap;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
            margin-left: auto; /* Ø¯ÙØ¹ Ø§Ù„Ù†Øµ Ù„Ù„ÙŠØ³Ø§Ø± */
        }
        .meal-nutrition-row .nutrition-badge.fat {
            order: 2; /* Ø§Ù„ÙˆØ³Ø· (Ø§Ù„Ø¯Ù‡ÙˆÙ†) */
            margin-left: auto
        }
        .meal-nutrition-row .nutrition-badge.protein {
            order: 3; /* ğŸ›‘ Ø£Ù‚ØµÙ‰ Ø§Ù„ÙŠÙ…ÙŠÙ† (Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ†) */
        }

        /* Ù…Ù„Ø§Ø­Ø¸Ø©: ØªÙ… Ø¥Ø²Ø§Ù„Ø© margin-left: auto Ù…Ù† .nutrition-badge.fat Ù„ÙƒÙŠ ØªØªØ¬Ù…Ø¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙÙŠ Ø§Ù„ÙŠÙ…ÙŠÙ† */


        /* Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© (Ø¨Ø´ÙƒÙ„ Ø¹Ø§Ù…) */
        .nutrition-badge {
            padding: 3px 8px;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 600;
            unicode-bidi: plaintext;
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .nutrition-badge.protein {
            background: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .nutrition-badge.carbs-header, .nutrition-badge.fat {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        .nutrition-badge.fat {
            background: rgba(168, 85, 247, 0.2);
            color: #c084fc;
            border: 1px solid rgba(168, 85, 247, 0.3);
        }

         /* ğŸ›‘ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§: Ø¥Ø¶Ø§ÙØ© ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø­Ø§ÙˆÙŠØ© (Ø§Ù„Ø®Ù„ÙÙŠØ© ÙˆØ§Ù„Ø­Ø¯ÙˆØ¯) ğŸ›‘ */
        .meal-nutrition-row .nutrition-info-text-start {
            order: 1; /* Ø£Ù‚ØµÙ‰ Ø§Ù„ÙŠØ³Ø§Ø± */
            white-space: nowrap;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.8); /* Ø²ÙŠØ§Ø¯Ø© ÙˆØ¶ÙˆØ­ Ø§Ù„Ù†Øµ Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
            margin-left: auto;

        /* ---------------------------------------------------- */
        /* Ø¥Ø¶Ø§ÙØ© ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø±Ø¦ÙŠØ© */
            padding: 4px 10px; /* Ù…Ø³Ø§ÙØ© Ø¯Ø§Ø®Ù„ÙŠØ© */
            border-radius: 8px; /* Ø²ÙˆØ§ÙŠØ§ Ù…Ø³ØªØ¯ÙŠØ±Ø© */
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(29, 78, 216, 0.1) 100%); /* Ø®Ù„ÙÙŠØ© Ø®ÙÙŠÙØ© Ù…Ù…ÙŠØ²Ø© */
            border: 1px solid rgba(59, 130, 246, 0.3); /* Ø­Ø¯ÙˆØ¯ Ø¨Ù„ÙˆÙ† Ø®ÙÙŠÙ */
            font-weight: 400;
            /* ---------------------------------------------------- */
}

        /* Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø·Ø¨ÙŠ */
        /* ---------------------------------------------------- */
        /* 3. Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø«: [Ø§Ù„ÙƒÙ„Ù‰] [Ø§Ù„Ù†Ù‚Ø±Ø³]...[Ø§Ù„Ø³ÙƒØ±ÙŠ] (ÙƒÙ…Ø§ Ù‡Ùˆ) */
        /* ---------------------------------------------------- */
        .meal-medical {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            flex-wrap: nowrap;
            unicode-bidi: plaintext;
            padding-top: 6px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            direction: rtl;
        }

        .meal-medical [data-order="5"] { order: 5; } /* Ø§Ù„ÙƒÙ„Ù‰ */
        .meal-medical [data-order="4"] { order: 4; } /* Ø§Ù„Ù†Ù‚Ø±Ø³ */
        .meal-medical [data-order="3"] { order: 3; } /* Ø§Ù„Ø¯Ù‡Ù†ÙŠØ§Øª */
        .meal-medical [data-order="2"] { order: 2; } /* Ø§Ù„Ø¶ØºØ· */
        .meal-medical [data-order="1"] { order: 1; } /* Ø§Ù„Ø³ÙƒØ±ÙŠ */


        .medical-badge {
            padding: 3px 8px;
            border-radius: 8px;
            font-size: 0.65rem;
            font-weight: 600;
            unicode-bidi: plaintext;
            display: flex;
            align-items: center;
            gap: 3px;
            flex-shrink: 0;
        }

        .medical-badge.diabetic {
            background: rgba(236, 72, 153, 0.2);
            color: #f472b6;
            border: 1px solid rgba(236, 72, 153, 0.3);
        }

        .medical-badge.pressure {
            background: rgba(249, 115, 22, 0.2);
            color: #fb923c;
            border: 1px solid rgba(249, 115, 22, 0.3);
        }

        .medical-badge.lipid {
            background: rgba(20, 184, 166, 0.2);
            color: #2dd4bf;
            border: 1px solid rgba(20, 184, 166, 0.3);
        }

        .medical-badge.gout {
            background: rgba(34, 197, 94, 0.2);
            color: #4ade80;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .medical-badge.kidney {
            background: rgba(99, 102, 241, 0.2);
            color: #818cf8;
            border: 1px solid rgba(99, 102, 241, 0.3);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /* Ø§Ù„ÙØ§ØµÙ„ Ø¨ÙŠÙ† Ø§Ù„ÙˆØ¬Ø¨Ø§Øª                                          */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        .meal-separator {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0 12px;
            flex-shrink: 0;
            gap: 4px;
        }

        .separator-line {
            width: 2px;
            height: 20px;
            background: linear-gradient(180deg,
                transparent 0%,
                rgba(74, 222, 128, 0.5) 30%,
                rgba(74, 222, 128, 0.8) 50%,
                rgba(74, 222, 128, 0.5) 70%,
                transparent 100%);
            border-radius: 2px;
        }

        .separator-icon-wrapper {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .separator-dot {
            width: 6px;
            height: 6px;
            background: linear-gradient(135deg, #4ade80, #22c55e);
            border-radius: 50%;
            box-shadow: 0 0 8px rgba(74, 222, 128, 0.5);
        }

        .separator-icon {
            font-size: 1.1rem;
            opacity: 0.7;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©                                       */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        .current-meal-bar {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 14px 20px;
            width: 100%;
            background: linear-gradient(135deg, rgba(74, 222, 128, 0.08) 0%, rgba(34, 197, 94, 0.03) 100%);
            min-height: 55px;
            margin-left: auto;
            margin-right: auto;
        }

        .meal-counter {
            background: rgba(74, 222, 128, 0.15);
            color: #dfceab;
            padding: 5px 12px;
            border-radius: 20px;
            font-family: 'Amiri';
            font-size: 0.95rem;
            font-weight:400 ;
            color: #e1d8c6;
            min-width: 60px;
            text-align: center;
        }

        .meal-icon {
            font-size: 1.4rem;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…                                                  */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        .progress-bar-container {
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4ade80, #22c55e);
            width: 0%;
            transition: width 0.1s linear;
        }
    </style>

    <script src="analyse_meals_m_1-50.js"></script>
    <script src="analyse_meals_m_51-100.js"></script>
    <script src="analyse_meals_m_101-150.js"></script>
    <script src="analyse_meals_m_151-200.js"></script>
    <script>
        // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…ÙŠØ¯Ø§Ù† Ø§Ù„Ù…ÙˆØ­Ø¯ Ø§Ù„Ø°ÙŠ ØªØªÙˆÙ‚Ø¹Ù‡ Ø¯Ø§Ù„Ø© initTicker
     var ANALYSED_MEALS_DATA = [
         ...(typeof medical1 !== 'undefined' ? medical1 : []),
         ...(typeof medical2 !== 'undefined' ? medical2 : []),
         ...(typeof medical3 !== 'undefined' ? medical3 : []),
         ...(typeof medical4 !== 'undefined' ? medical4 : [])
     ];

     console.log("ğŸ“Š ØªÙ… Ø¯Ù…Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø·Ø¨ÙŠ Ø¨Ù†Ø¬Ø§Ø­. Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„ÙŠ: " + ANALYSED_MEALS_DATA.length);
    </script>
</head>
<body>

<div class="app-frame" id="appFrame">
    <div class="main-card">

        <!-- Ù‚Ø³Ù… Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„ØªØ±Ø­ÙŠØ¨ -->
        <div class="image-section">
            <div class="welcome-content">
                <h1 class="welcome-title amiri-font" id="welcomeTitle">Ø´Ùˆ Ø¹Ø§Ù…Ù„ÙŠ Ø£ÙƒÙ„ØŸ</h1>
                <button class="enter-btn" id="enterBtn" onclick="openApp()">ØªÙØ¶Ù„ÙŠ!</button>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ© -->
        <div class="lang-section">
            <div class="lang-grid">
                <button class="lang-btn amiri-font active" data-lang="ar" onclick="setLanguage('ar', this)">Ø¹Ø±Ø¨ÙŠ</button>
                <button class="lang-btn" data-lang="en" onclick="setLanguage('en', this)">English</button>
                <button class="lang-btn amiri-font" data-lang="fa" onclick="setLanguage('fa', this)">ÙØ§Ø±Ø³ÛŒ</button>
                <button class="lang-btn" data-lang="ru" onclick="setLanguage('ru', this)">Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
            </div>
        </div>

        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ÙˆØ¬Ø¨Ø§Øª Ø§Ù„Ø³ÙÙ„ÙŠ -->
        <div class="bottom-bar">
            <div class="ticker-wrapper">
                <div class="ticker-track rtl-scroll" id="tickerTrack">

                </div>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="current-meal-bar" id="currentMealBar">
                <span class="meal-counter meal-quote-display" id="mealCounter">... Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø£Ø«ÙˆØ± Ù‡Ù†Ø§ ...</span>
                <span class="current-meal-country hidden" id="currentMealCountry"></span>
            </div>
        </div>

    </div>
</div>

<script>
    // ===============================================================
   // I. Ø§Ù„ØªØ¹Ø±ÙŠÙØ§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
   // ===============================================================

   // ğŸš¨ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªÙŠ ØªØªØ­ÙƒÙ… ÙÙŠ ØªØªØ¨Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ø¯ÙˆØ±ÙŠ
   let mealCycleInterval = null;
   let currentLang = 'ar'; // Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
   let currentIndex = 0;
   let mealsData = [];
   let progressInterval = null;

   // âŒ ØªÙ… Ø­Ø°Ù nameTimeout Ùˆ hideTimeout Ù„Ø£Ù†Ù‡Ù…Ø§ Ù„Ù… ÙŠØ¹ÙˆØ¯Ø§ Ù…Ø·Ù„ÙˆØ¨ÙŠÙ†

   // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
   const TIMING = {
       // âŒ ØªÙ… Ø­Ø°Ù NAME_APPEAR_DELAY Ùˆ NAME_VISIBLE_DURATION
       TICKER_SPEED: 20, // Ø³Ø±Ø¹Ø© Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ù…ØªØ­Ø±Ùƒ (Ø¨ÙƒØ³Ù„/Ø«Ø§Ù†ÙŠØ©)
       GAP_BETWEEN_MEALS: 5 // Ø§Ù„ÙØ§ØµÙ„ Ø¨ÙŠÙ† Ø§Ù„ÙˆØ¬Ø¨Ø§Øª (Ø§Ù„Ø°ÙŠ ÙŠØ­Ø¯Ø¯ Ù…Ø¯Ø© Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¢Ù†)
   };

// ğŸ’ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù‚ÙˆØ§Ù„ Ø§Ù„Ù…Ø£Ø«ÙˆØ±Ø© (ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ø¨Ø£Ù‚ÙˆØ§Ù„Ùƒ Ø§Ù„Ù…Ø£Ø«ÙˆØ±Ø©)
const quotesData = [
    { ar: 'Ø§Ù„Ø¹Ù‚Ù„ Ø§Ù„Ø³Ù„ÙŠÙ… ÙÙŠ Ø§Ù„Ø¬Ø³Ù… Ø§Ù„Ø³Ù„ÙŠÙ….', en: 'A sound mind in a sound body.', fa: 'Ø¹Ù‚Ù„ Ø³Ø§Ù„Ù… Ø¯Ø± Ø¨Ø¯Ù† Ø³Ø§Ù„Ù… Ø§Ø³Øª.', ru: 'Ğ’ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²Ğ¾Ğ¼ Ñ‚ĞµĞ»Ğµ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²Ñ‹Ğ¹ Ğ´ÑƒÑ….' },
    { ar: 'ØµØ­ØªÙƒ ØªØ¨Ø¯Ø£ Ù…Ù† Ù…Ø·Ø¨Ø®Ùƒ.', en: 'Your health starts in your kitchen.', fa: 'Ø³Ù„Ø§Ù…Øª Ø´Ù…Ø§ Ø§Ø² Ø¢Ø´Ù¾Ø²Ø®Ø§Ù†Ù‡â€ŒØªØ§Ù† Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒØ´ÙˆØ¯.', ru: 'Ğ’Ğ°ÑˆĞµ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ÑÑ Ñ Ğ²Ğ°ÑˆĞµĞ¹ ĞºÑƒÑ…Ğ½Ğ¸.' },
    { ar: 'Ù„ÙŠÙƒÙ† Ø·Ø¹Ø§Ù…Ùƒ Ø¯ÙˆØ§Ø¤ÙƒØŒ ÙˆØ¯ÙˆØ§Ø¤Ùƒ Ø·Ø¹Ø§Ù…Ùƒ.', en: 'Let food be thy medicine and medicine be thy food.', fa: 'Ø¨Ú¯Ø°Ø§Ø±ÛŒØ¯ ØºØ°Ø§ÛŒ Ø´Ù…Ø§ Ø¯ÙˆØ§ÛŒ Ø´Ù…Ø§ Ø¨Ø§Ø´Ø¯ Ùˆ Ø¯ÙˆØ§ÛŒ Ø´Ù…Ø§ ØºØ°Ø§ÛŒ Ø´Ù…Ø§.', ru: 'ĞŸÑƒÑÑ‚ÑŒ Ğ¿Ğ¸Ñ‰Ğ° Ğ±ÑƒĞ´ĞµÑ‚ Ñ‚Ğ²Ğ¾Ğ¸Ğ¼ Ğ»ĞµĞºĞ°Ñ€ÑÑ‚Ğ²Ğ¾Ğ¼, Ğ° Ğ»ĞµĞºĞ°Ñ€ÑÑ‚Ğ²Ğ¾ â€” Ğ¿Ğ¸Ñ‰ĞµĞ¹.' },
    { ar: 'Ù†Ø­Ù† Ù…Ø§ Ù†Ø£ÙƒÙ„ØŒ ÙØ§Ø¬Ø¹Ù„ Ø·Ø¹Ø§Ù…Ùƒ Ø±Ø§Ù‚ÙŠØ§Ù‹.', en: 'We are what we eat, so make your food exquisite.', fa: 'Ù…Ø§ Ù‡Ù…Ø§Ù† Ú†ÛŒØ²ÛŒ Ù‡Ø³ØªÛŒÙ… Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ±ÛŒÙ…ØŒ Ù¾Ø³ ØºØ°Ø§ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ù†ÙÛŒØ³ Ø³Ø§Ø²ÛŒØ¯.', ru: 'ĞœÑ‹ â€” Ñ‚Ğ¾, Ñ‡Ñ‚Ğ¾ Ğ¼Ñ‹ ĞµĞ´Ğ¸Ğ¼, Ğ¿Ğ¾ÑÑ‚Ğ¾Ğ¼Ñƒ ÑĞ´ĞµĞ»Ğ°Ğ¹Ñ‚Ğµ ÑĞ²Ğ¾Ñ Ğ¿Ğ¸Ñ‰Ñƒ Ğ¸Ğ·Ñ‹ÑĞºĞ°Ğ½Ğ½Ğ¾Ğ¹.' },
    { ar: 'Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© Ø®ÙŠØ± Ù…Ù† Ø§Ù„Ø¹Ù„Ø§Ø¬ØŒ ÙˆØ¬ÙˆØ¯Ø© Ø§Ù„ØºØ°Ø§Ø¡ Ù‡ÙŠ Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰.', en: 'Prevention is better than cure, and quality food is the first prevention.', fa: 'Ù¾ÛŒØ´Ú¯ÛŒØ±ÛŒ Ø¨Ù‡ØªØ± Ø§Ø² Ø¯Ø±Ù…Ø§Ù† Ø§Ø³Øª Ùˆ Ú©ÛŒÙÛŒØª ØºØ°Ø§ØŒ Ø§ÙˆÙ„ÛŒÙ† Ù¾ÛŒØ´Ú¯ÛŒØ±ÛŒ Ø§Ø³Øª.', ru: 'ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»Ğ°ĞºÑ‚Ğ¸ĞºĞ° Ğ»ÑƒÑ‡ÑˆĞµ Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ, Ğ° ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ°Ñ Ğ¿Ğ¸Ñ‰Ğ° â€” Ğ¿ĞµÑ€Ğ²Ğ°Ñ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğ°ĞºÑ‚Ğ¸ĞºĞ°.' },
    { ar: 'ÙƒÙ„Ù…Ø§ ÙƒØ§Ù† Ø§Ù„ØºØ°Ø§Ø¡ Ø£Ù‚Ø±Ø¨ Ù„Ù„Ø·Ø¨ÙŠØ¹Ø©ØŒ ÙƒØ§Ù† Ø£ÙØ¶Ù„ Ù„ØµØ­ØªÙƒ.', en: 'The closer the food is to nature, the better for your health.', fa: 'Ù‡Ø±Ú†Ù‡ ØºØ°Ø§ Ø¨Ù‡ Ø·Ø¨ÛŒØ¹Øª Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ± Ø¨Ø§Ø´Ø¯ØŒ Ø¨Ø±Ø§ÛŒ Ø³Ù„Ø§Ù…ØªÛŒ Ø´Ù…Ø§ Ø¨Ù‡ØªØ± Ø§Ø³Øª.', ru: 'Ğ§ĞµĞ¼ Ğ±Ğ»Ğ¸Ğ¶Ğµ Ğ¿Ğ¸Ñ‰Ğ° Ğº Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğµ, Ñ‚ĞµĞ¼ Ğ»ÑƒÑ‡ÑˆĞµ Ğ´Ğ»Ñ Ğ²Ğ°ÑˆĞµĞ³Ğ¾ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ.' },
    { ar: 'Ø§Ø³ØªØ«Ù…Ø± ÙÙŠ Ø·Ø¹Ø§Ù…ÙƒØŒ ØªÙˆÙØ± ÙÙŠ ÙÙˆØ§ØªÙŠØ± Ø·Ø¨ÙŠØ¨Ùƒ.', en: 'Invest in your food, save on your doctor\'s bills.', fa: 'Ø±ÙˆÛŒ ØºØ°Ø§ÛŒ Ø®ÙˆØ¯ Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ú©Ù†ÛŒØ¯ØŒ Ø¯Ø± Ù‚Ø¨Ø¶â€ŒÙ‡Ø§ÛŒ Ù¾Ø²Ø´Ú© Ø®ÙˆØ¯ ØµØ±ÙÙ‡â€ŒØ¬ÙˆÛŒÛŒ Ú©Ù†ÛŒØ¯.', ru: 'Ğ˜Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ² ÑĞ²Ğ¾Ñ ĞµĞ´Ñƒ, ÑĞºĞ¾Ğ½Ğ¾Ğ¼ÑŒÑ‚Ğµ Ğ½Ğ° ÑÑ‡ĞµÑ‚Ğ°Ñ… Ğ²Ñ€Ğ°Ñ‡ĞµĞ¹.' },
    { ar: 'Ø¬ÙˆØ¯Ø© Ø§Ù„ØºØ°Ø§Ø¡ Ù…Ù‚ÙŠØ§Ø³ Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„Ø­ÙŠØ§Ø©.', en: 'The quality of food is a measure of the quality of life.', fa: 'Ú©ÛŒÙÛŒØª ØºØ°Ø§ Ù…Ø¹ÛŒØ§Ø± Ú©ÛŒÙÛŒØª Ø²Ù†Ø¯Ú¯ÛŒ Ø§Ø³Øª.', ru: 'ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ĞµĞ´Ñ‹ â€” ÑÑ‚Ğ¾ Ğ¼ĞµÑ€Ğ° ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ¶Ğ¸Ğ·Ğ½Ğ¸.' },
    { ar: 'Ø§Ù„Ø±Ø´Ø§Ù‚Ø© ØªØ¨Ø¯Ø£ Ù…Ù† Ø§Ù„Ø·Ø¨Ù‚ØŒ Ù„Ø§ Ù…Ù† Ø§Ù„ØµØ§Ù„Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© ÙÙ‚Ø·.', en: 'Fitness begins in the dish, not just the gym.', fa: 'ØªÙ†Ø§Ø³Ø¨ Ø§Ù†Ø¯Ø§Ù… Ø§Ø² Ø¸Ø±Ù Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ù†Ù‡ ÙÙ‚Ø· Ø§Ø² Ø¨Ø§Ø´Ú¯Ø§Ù‡.', ru: 'Ğ¤Ğ¸Ñ‚Ğ½ĞµÑ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ÑÑ Ñ Ñ‚Ğ°Ñ€ĞµĞ»ĞºĞ¸, Ğ° Ğ½Ğµ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ¾ ÑĞ¿Ğ¾Ñ€Ñ‚Ğ·Ğ°Ğ»Ğ°.' },
    { ar: 'ØµØ­ØªÙƒ Ù‡ÙŠ Ø«Ø±ÙˆØªÙƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©ØŒ ÙˆØ§Ù„ØºØ°Ø§Ø¡ Ù‡Ùˆ Ù…ÙØªØ§Ø­ Ø§Ù„Ø®Ø²Ø§Ù†Ø©.', en: 'Your health is your true wealth, and food is the key to the vault.', fa: 'Ø³Ù„Ø§Ù…ØªÛŒ Ø´Ù…Ø§ Ø«Ø±ÙˆØª ÙˆØ§Ù‚Ø¹ÛŒ Ø´Ù…Ø§Ø³Øª Ùˆ ØºØ°Ø§ Ú©Ù„ÛŒØ¯ Ø¢Ù† Ø®Ø²Ø§Ù†Ù‡ Ø§Ø³Øª.', ru: 'Ğ’Ğ°ÑˆĞµ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ â€” Ğ²Ğ°ÑˆĞµ Ğ¸ÑÑ‚Ğ¸Ğ½Ğ½Ğ¾Ğµ Ğ±Ğ¾Ğ³Ğ°Ñ‚ÑÑ‚Ğ²Ğ¾, Ğ° ĞµĞ´Ğ° â€” ĞºĞ»ÑÑ‡ Ğº Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ñƒ.' },
    { ar: 'Ø§Ù„Ø·Ø¹Ø§Ù… Ø§Ù„Ø¬ÙŠØ¯ ÙŠØ¹Ø·ÙŠ Ø§Ù„Ù‚ÙˆØ©ØŒ ÙˆØ§Ù„Ø·Ø¹Ø§Ù… Ø§Ù„Ø³ÙŠØ¦ ÙŠØ³Ø±Ù‚Ù‡Ø§.', en: 'Good food gives strength, bad food steals it.', fa: 'ØºØ°Ø§ÛŒ Ø®ÙˆØ¨ Ù‚Ø¯Ø±Øª Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ùˆ ØºØ°Ø§ÛŒ Ø¨Ø¯ Ø¢Ù† Ø±Ø§ Ù…ÛŒâ€ŒØ¯Ø²Ø¯Ø¯.', ru: 'Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ°Ñ ĞµĞ´Ğ° Ğ´Ğ°ĞµÑ‚ ÑĞ¸Ğ»Ñ‹, Ğ¿Ğ»Ğ¾Ñ…Ğ°Ñ ĞµĞ´Ğ° Ğ¸Ñ… ĞºÑ€Ğ°Ğ´ĞµÑ‚.' },
    { ar: 'Ø§Ø¬Ø¹Ù„ Ø§Ù„ÙÙˆØ§ÙƒÙ‡ ÙˆØ§Ù„Ø®Ø¶Ø±Ø§ÙˆØ§Øª Ø£ØµØ¯Ù‚Ø§Ø¡Ùƒ Ø§Ù„Ù…Ù‚Ø±Ø¨ÙŠÙ†.', en: 'Make fruits and vegetables your closest friends.', fa: 'Ù…ÛŒÙˆÙ‡â€ŒÙ‡Ø§ Ùˆ Ø³Ø¨Ø²ÛŒØ¬Ø§Øª Ø±Ø§ Ø¯ÙˆØ³ØªØ§Ù† ØµÙ…ÛŒÙ…ÛŒ Ø®ÙˆØ¯ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯.', ru: 'Ğ¡Ğ´ĞµĞ»Ğ°Ğ¹Ñ‚Ğµ Ñ„Ñ€ÑƒĞºÑ‚Ñ‹ Ğ¸ Ğ¾Ğ²Ğ¾Ñ‰Ğ¸ ÑĞ²Ğ¾Ğ¸Ğ¼Ğ¸ Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞ¸Ğ¼Ğ¸ Ğ´Ñ€ÑƒĞ·ÑŒÑĞ¼Ğ¸.' },
    { ar: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¯ÙˆØ§Ø¡ ÙŠØ¹Ù…Ù„ Ù…Ø§ ÙŠØ¹Ù…Ù„Ù‡ Ø§Ù„ØºØ°Ø§Ø¡ Ø§Ù„ØµØ­ÙŠ.', en: 'No drug works as well as healthy food does.', fa: 'Ù‡ÛŒÚ† Ø¯Ø§Ø±ÙˆÛŒÛŒ Ø¨Ù‡ Ø§Ù†Ø¯Ø§Ø²Ù‡ ØºØ°Ø§ÛŒ Ø³Ø§Ù„Ù… Ú©Ø§Ø± Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.', ru: 'ĞĞ¸ Ğ¾Ğ´Ğ½Ğ¾ Ğ»ĞµĞºĞ°Ñ€ÑÑ‚Ğ²Ğ¾ Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ‚Ğ°Ğº Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾, ĞºĞ°Ğº Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²Ğ°Ñ Ğ¿Ğ¸Ñ‰Ğ°.' },
    { ar: 'ÙƒÙ„ Ù…Ù„Ø¹Ù‚Ø© Ù‡ÙŠ Ø®ÙŠØ§Ø± Ø¥Ù…Ø§ Ù„Ù„ØµØ­Ø© Ø£Ùˆ Ø¶Ø¯Ù‡Ø§.', en: 'Every spoonful is a choice, either for health or against it.', fa: 'Ù‡Ø± Ù‚Ø§Ø´Ù‚ ÛŒÚ© Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ø³ØªØŒ ÛŒØ§ Ø¨Ù‡ Ù†ÙØ¹ Ø³Ù„Ø§Ù…ØªÛŒ ÛŒØ§ Ø¹Ù„ÛŒÙ‡ Ø¢Ù†.', ru: 'ĞšĞ°Ğ¶Ğ´Ğ°Ñ Ğ»Ğ¾Ğ¶ĞºĞ° â€” ÑÑ‚Ğ¾ Ğ²Ñ‹Ğ±Ğ¾Ñ€, Ğ»Ğ¸Ğ±Ğ¾ Ğ² Ğ¿Ğ¾Ğ»ÑŒĞ·Ñƒ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ, Ğ»Ğ¸Ğ±Ğ¾ Ğ¿Ñ€Ğ¾Ñ‚Ğ¸Ğ² Ğ½ĞµĞ³Ğ¾.' },
    { ar: 'ØªØºØ°ÙŠØ© Ø¬ÙŠØ¯Ø© Ø§Ù„ÙŠÙˆÙ… ØªØ¹Ù†ÙŠ Ù…Ù†Ø§Ø¹Ø© Ø£Ù‚ÙˆÙ‰ ØºØ¯Ø§Ù‹.', en: 'Good nutrition today means stronger immunity tomorrow.', fa: 'ØªØºØ°ÛŒÙ‡ Ø®ÙˆØ¨ Ø§Ù…Ø±ÙˆØ² Ø¨Ù‡ Ù…Ø¹Ù†Ø§ÛŒ Ø³ÛŒØ³ØªÙ… Ø§ÛŒÙ…Ù†ÛŒ Ù‚ÙˆÛŒâ€ŒØªØ± ÙØ±Ø¯Ø§ Ø§Ø³Øª.', ru: 'Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞµĞµ Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ¸Ğµ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ Ğ¾Ğ·Ğ½Ğ°Ñ‡Ğ°ĞµÑ‚ Ğ±Ğ¾Ğ»ĞµĞµ ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¸Ğ¼Ğ¼ÑƒĞ½Ğ¸Ñ‚ĞµÑ‚ Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ°.' }
];

   // ğŸ’ ÙƒØ§Ø¦Ù† Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª Ø§Ù„Ù…Ø¯Ù…Ø¬ ÙˆØ§Ù„Ù…ÙØ­Ø¯Ù‘ÙØ« (ØªÙ… ØªØ¶Ù…ÙŠÙ† Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„ÙƒØ§Ù…Ù„)
   const translations = {
       ar: {
           dir: 'rtl',
           title: 'Ø´Ùˆ Ø¹Ø§Ù…Ù„ÙŠ Ø£ÙƒÙ„ØŸ',
           btn: 'ØªÙØ¶Ù„ÙŠ!',
           loading: 'Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ø¯ÙŠØ«...',
           kcal: 'Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ©',
           protein: 'Ø¨Ø±ÙˆØªÙŠÙ†',
           carbs: 'Ø§Ù„ÙƒØ±Ø¨ÙˆÙ‡ÙŠØ¯Ø±Ø§Øª',
           fat: 'Ø§Ù„Ø¯Ù‡ÙˆÙ†',
           sugar: 'Ø³ÙƒØ±',
           cholesterol: 'ÙƒÙˆÙ„Ø³ØªØ±ÙˆÙ„',
           sodium: 'ØµÙˆØ¯ÙŠÙˆÙ…',
           fiber: 'Ø£Ù„ÙŠØ§Ù',
           gi: 'Ù…Ø¤Ø´Ø± Ø³ÙƒØ±ÙŠ',
           diabetes: 'Ø§Ù„Ø³ÙƒØ±ÙŠ',
           pressure: 'Ø§Ù„Ø¶ØºØ·',
           lipids: 'Ø§Ù„Ø¯Ù‡ÙˆÙ†',
           gout: 'Ø§Ù„Ù†Ù‚Ø±Ø³',
           kidney: 'Ø§Ù„ÙƒÙ„Ù‰',
           ingredients_per_100g: 'Ù†Ø³Ø¨Ø© Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ù…Ù† Ø§Ù„Ø¯Ù‡ÙˆÙ† ÙˆØ§Ù„Ø¨Ø±ÙˆØªÙŠÙ† ÙÙŠ 100ØºØ±Ø§Ù… Ù…Ù† Ø§Ù„ÙˆØ¬Ø¨Ø©',
           suitable: 'Ù…Ù†Ø§Ø³Ø¨Ø©',
           unsuitable: 'ØºÙŠØ± Ù…Ù†Ø§Ø³Ø¨Ø©',
           caution: 'Ø¨Ø­Ø°Ø±',
           unknown: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'
       },
       en: {
           dir: 'ltr',
           title: 'What is for Dinner?',
           btn: 'Enjoy!',
           loading: 'Loading...',
           kcal: 'kcal',
           protein: 'Protein',
           carbs: 'Carbs',
           fat: 'Fat',
           sugar: 'Sugar',
           cholesterol: 'Chol',
           sodium: 'Sodium',
           fiber: 'Fiber',
           gi: 'GI',
           diabetes: 'Diabetes',
           pressure: 'BP',
           lipids: 'Lipids',
           gout: 'Gout',
           kidney: 'Kidney',
           ingredients_per_100g: 'Ingredients per 100g of the meal',
           suitable: 'Suitable',
           unsuitable: 'Unsuitable',
           caution: 'Caution',
           unknown: 'Unknown'
       },
       fa: {
           dir: 'rtl',
           title: 'ØºØ°Ø§ Ú†ÛŒ Ø¯Ø§Ø±ÛŒÙ…ØŸ',
           btn: 'Ø¨ÙØ±Ù…Ø§ÛŒÛŒØ¯!',
           loading: 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...',
           kcal: 'Ú©Ø§Ù„Ø±ÛŒ',
           protein: 'Ù¾Ø±ÙˆØªØ¦ÛŒÙ†',
           carbs: 'Ú©Ø±Ø¨Ùˆ',
           fat: 'Ú†Ø±Ø¨ÛŒ',
           sugar: 'Ù‚Ù†Ø¯',
           cholesterol: 'Ú©Ù„Ø³ØªØ±ÙˆÙ„',
           sodium: 'Ø³Ø¯ÛŒÙ…',
           fiber: 'ÙÛŒØ¨Ø±',
           gi: 'Ø´Ø§Ø®Øµ Ù‚Ù†Ø¯',
           diabetes: 'Ø¯ÛŒØ§Ø¨Øª',
           pressure: 'ÙØ´Ø§Ø± Ø®ÙˆÙ†',
           lipids: 'Ú†Ø±Ø¨ÛŒ Ø®ÙˆÙ†',
           gout: 'Ù†Ù‚Ø±Ø³',
           kidney: 'Ú©Ù„ÛŒÙ‡',
           ingredients_per_100g: 'Ù†Ø³Ø¨Øª Ù…ÙˆØ§Ø¯ ØªØ´Ú©ÛŒÙ„ Ø¯Ù‡Ù†Ø¯Ù‡ Ø¯Ø± 100 Ú¯Ø±Ù… Ø§Ø² ÙˆØ¹Ø¯Ù‡',
           suitable: 'Ù…Ù†Ø§Ø³Ø¨',
           unsuitable: 'Ù†Ø§Ù…Ù†Ø§Ø³Ø¨',
           caution: 'Ø¨Ø§ Ø§Ø­ØªÛŒØ§Ø·',
           unknown: 'Ù†Ø§Ø´Ù†Ø§Ø®ØªÙ‡'
       },
       ru: {
           dir: 'ltr',
           title: 'Ğ§Ñ‚Ğ¾ Ğ½Ğ° Ğ¾Ğ±ĞµĞ´?',
           btn: 'Ğ—Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚Ğµ!',
           loading: 'Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°...',
           kcal: 'ĞºĞºĞ°Ğ»',
           protein: 'Ğ‘ĞµĞ»Ğ¾Ğº',
           carbs: 'Ğ£Ğ³Ğ»ĞµĞ²',
           fat: 'Ğ–Ğ¸Ñ€Ñ‹',
           sugar: 'Ğ¡Ğ°Ñ…Ğ°Ñ€',
           cholesterol: 'Ğ¥Ğ¾Ğ»ĞµÑÑ‚',
           sodium: 'ĞĞ°Ñ‚Ñ€Ğ¸Ğ¹',
           fiber: 'ĞšĞ»ĞµÑ‚Ñ‡',
           gi: 'Ğ“Ğ˜',
           diabetes: 'Ğ”Ğ¸Ğ°Ğ±ĞµÑ‚',
           pressure: 'Ğ”Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ',
           lipids: 'Ğ›Ğ¸Ğ¿Ğ¸Ğ´Ñ‹',
           gout: 'ĞŸĞ¾Ğ´Ğ°Ğ³Ñ€Ğ°',
           kidney: 'ĞŸĞ¾Ñ‡ĞºĞ¸',
           ingredients_per_100g: 'Ğ¡Ğ¾ÑÑ‚Ğ°Ğ² Ğ½Ğ° 100 Ğ³Ñ€Ğ°Ğ¼Ğ¼ Ğ±Ğ»ÑĞ´Ğ°',
           suitable: 'ĞŸĞ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚',
           unsuitable: 'ĞĞµ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚',
           caution: 'ĞÑÑ‚Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ğ¾',
           unknown: 'ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ğ¾'
       }
   };

   // Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„ÙÙˆØ§ØµÙ„ Ø§Ù„Ù…ØªÙ†ÙˆØ¹Ø©
   const separatorIcons = ['ğŸ´', 'âœ¦', 'â—†', 'ğŸ¥„', 'ğŸ³', 'â­', 'ğŸŒŸ'];
</script>

   <div id="disclaimer-modal">
    <div class="modal-content">
        <h2 id="disc-title"></h2>
        <p id="disc-body"></p>
        <button id="disc-btn"></button>
    </div>
</div>

<script>
    // ===============================================================
    // I. ÙƒÙˆØ¯ Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© (ÙŠØ¸Ù‡Ø± Ø£ÙˆÙ„Ø§Ù‹)
    // ===============================================================
    document.addEventListener("DOMContentLoaded", function() {
    // 1. Ø¬Ù„Ø¨ Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…ÙØ¶Ù„Ø© Ù…Ù† Ø°Ø§ÙƒØ±Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŒ ÙˆØ¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙƒØ§ÙØªØ±Ø§Ø¶ÙŠ
    const savedLang = localStorage.getItem('preferredLang') || 'ar';

    // 2. Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¨Ø§Ù„Ù„ØºØ§Øª Ø§Ù„Ø£Ø±Ø¨Ø¹
    const content = {
        ar: { title: "Ø¥Ø®Ù„Ø§Ø¡ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø·Ø¨ÙŠØ©", body: "Ø§Ù† Ù‡Ø°Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ø¨Ø§Ø±Ø© Ø¹Ù† Ù…Ø±Ø¬Ø¹ ØºØ°Ø§Ø¦ÙŠ ÙÙ‚Ø·. Ù„Ø°Ù„Ùƒ, ÙØ¥Ù† Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ© Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© Ù„Ø§ ØªØºÙ†ÙŠ Ø¹Ù† Ø§Ø³ØªØ´Ø§Ø±Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø§Ù„Ù…Ø®ØªØµ.", btn: "Ù…ÙÙ€Ù€Ù€ÙˆØ§ÙÙÙ€Ù€Ù€Ù€Ù‚ÙÙ€Ù€Ù€Ù€Ø©" },
        en: { title: "Medical Disclaimer", body: "This app is for nutritional reference only. The medical analyses provided are not a substitute for professional medical advice.", btn: "I AGREE" },
        ru: { title: "ĞœĞµĞ´Ğ¸Ñ†Ğ¸Ğ½ÑĞºĞ¸Ğ¹ Ğ¾Ñ‚ĞºĞ°Ğ·", body: "Ğ­Ñ‚Ğ¾ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ ÑĞ²Ğ»ÑĞµÑ‚ÑÑ ÑĞ¿Ñ€Ğ°Ğ²Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¾Ğ¼ Ğ¿Ğ¾ Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ¸Ñ. ĞŸÑ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğµ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ñ‹ Ğ½Ğµ Ğ·Ğ°Ğ¼ĞµĞ½ÑÑÑ‚ ĞºĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ñ†Ğ¸Ñ Ğ²Ñ€Ğ°Ñ‡Ğ°.", btn: "Ğ¡ĞĞ“Ğ›ĞĞ¡ĞĞ" },
        fa: { title: "Ø³Ù„Ø¨ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª Ù¾Ø²Ø´Ú©ÛŒ", body: "Ø§ÛŒÙ† Ø¨Ø±Ù†Ø§Ù…Ù‡ ÙÙ‚Ø· ÛŒÚ© Ù…Ø±Ø¬Ø¹ ØªØºØ°ÛŒÙ‡ Ø§Ø³Øª. ØªØ¬Ø²ÛŒÙ‡ Ùˆ ØªØ­Ù„ÛŒÙ„ Ù‡Ø§ÛŒ Ø§Ø±Ø§Ø¦Ù‡ Ø´Ø¯Ù‡ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† ØªÙˆØµÛŒÙ‡ Ù‡Ø§ÛŒ Ù¾Ø²Ø´Ú©ÛŒ Ø­Ø±ÙÙ‡ Ø§ÛŒ Ù†ÛŒØ³Øª.", btn: "Ù‚Ø¨ÙˆÙ„ Ø¯Ø§Ø±Ù…" }
    };

    // 3. Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ø§ Ù‡Ùˆ Ù…ÙØ¹Ù„ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø­Ø§Ù„ÙŠØ§Ù‹
    const lang = content[savedLang] || content.ar;

    // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ø§ÙØ°Ø© (Ù†Ø³ØªØ®Ø¯Ù… true Ø­Ø§Ù„ÙŠØ§Ù‹ Ù„Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©)
        if (!localStorage.getItem("disclaimer_accepted")){
        const modal = document.getElementById("disclaimer-modal");
        if (modal) {
            document.getElementById("disc-title").innerText = lang.title;
            document.getElementById("disc-body").innerText = lang.body;
            document.getElementById("disc-btn").innerText = lang.btn;

            // Ø¶Ø¨Ø· Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù†Øµ (RTL Ù„Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„ÙØ§Ø±Ø³ÙŠØ©)
            const isRTL = (savedLang === 'ar' || savedLang === 'fa');
            modal.style.direction = isRTL ? 'rtl' : 'ltr';

            modal.style.display = "block";

            document.getElementById("disc-btn").onclick = function() {
                localStorage.setItem("disclaimer_accepted", "true");
                modal.style.display = "none";
            };
        }
    }
});

    // ===============================================================
    // II. Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙˆØ§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù„ØºØ©
    // ===============================================================

    function setLanguage(lang, btnElement) {
        const t = translations[lang];
        if (!t) return;

        document.querySelectorAll('.lang-btn').forEach(b => b.disabled = true);

        btnElement.innerHTML = `<span class="flex items-center justify-center gap-2">
            <svg class="animate-spin h-4 w-4" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            ${t.loading}
        </span>`;

        setTimeout(() => {
            currentLang = lang;
            document.documentElement.lang = lang;
            document.documentElement.dir = t.dir;

            const welcomeTitle = document.getElementById('welcomeTitle');
            const enterBtn = document.getElementById('enterBtn');

            if (welcomeTitle) welcomeTitle.textContent = t.title;
            if (enterBtn) enterBtn.textContent = t.btn;

            document.querySelectorAll('.lang-btn').forEach(b => {
                b.disabled = false;
                b.classList.remove('active');
                const originalText = { ar: 'Ø¹Ø±Ø¨ÙŠ', en: 'English', fa: 'ÙØ§Ø±Ø³ÛŒ', ru: 'Ğ ÑƒÑÑĞºĞ¸Ğ¹' };
                b.innerHTML = originalText[b.dataset.lang];
            });
            btnElement.classList.add('active');

            rebuildTicker();
            restartMealCycle();

            localStorage.setItem('preferredLang', lang);
        }, 2000);
    }

    function loadSavedLanguage() {
        const saved = localStorage.getItem('preferredLang') || 'ar';
        const t = translations[saved] || translations.ar;

        currentLang = saved;
        document.documentElement.lang = saved;
        document.documentElement.dir = t.dir;

        const welcomeTitle = document.getElementById('welcomeTitle');
        const enterBtn = document.getElementById('enterBtn');

        if (welcomeTitle) welcomeTitle.textContent = t.title;
        if (enterBtn) enterBtn.textContent = t.btn;

        document.querySelectorAll('.lang-btn').forEach(b => {
            b.classList.toggle('active', b.dataset.lang === saved);
        });
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // III. Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    function getMeals(data) {
        return data.filter(item => item.hasOwnProperty('Ø§Ù„Ø±Ù‚Ù…'));
    }

    function getMealName(meal, lang) {
        if (!meal) return '';
        if (meal.Ø§Ù„Ø§Ø³Ù… && meal.Ø§Ù„Ø§Ø³Ù…[lang]) return String(meal.Ø§Ù„Ø§Ø³Ù…[lang]).trim();
        if (meal.Ø§Ø³Ù…_Ø§Ù„ÙˆØ¬Ø¨Ø©) return String(meal.Ø§Ø³Ù…_Ø§Ù„ÙˆØ¬Ø¨Ø©).trim();
        return 'ÙˆØ¬Ø¨Ø© ØºÙŠØ± Ù…Ø¹Ù†ÙˆÙ†Ø©';
    }

    function createSeparator(index) {
        const icon = separatorIcons[index % separatorIcons.length];
        return `<div class="meal-separator"><div class="separator-line"></div><div class="separator-icon-wrapper"><div class="separator-dot"></div><span class="separator-icon">${icon}</span><div class="separator-dot"></div></div><div class="separator-line"></div></div>`;
    }

    const cleanDiseaseKey = (rawKey) => {
        if (typeof rawKey !== 'string') return '';
        return rawKey.replace(/^Ù…Ø±Ø¶Ù‰\s+/, '').trim();
    };

    function formatNutrientOrder(icon, value, unitOrIngredient, lang) {
        if (lang === 'en' || lang === 'ru') return `${icon} ${unitOrIngredient} ${value}`;
        return `${value} ${unitOrIngredient} ${icon}`;
    }

    function formatMealName(name) {
        if (!name || typeof name !== 'string') return '';
        const words = name.trim().split(/\s+/);
        if (words.length > 3) {
            const firstPart = words.slice(0, 3).join(' ');
            const secondPart = words.slice(3).join(' ');
            return `${firstPart}<br>${secondPart}`;
        }
        return name;
    }

    const getSuitabilityInfo = (suitabilityText) => {
        const text = String(suitabilityText).trim();
        if (text.includes('ØºÙŠØ± Ù…Ù†Ø§Ø³Ø¨Ø©')) return { icon: 'âŒ', key: 'unsuitable', css: 'unsuitable' };
        if (text.includes('Ø¨Ø­Ø°Ø±')) return { icon: 'âš ï¸', key: 'caution', css: 'caution' };
        if (text.includes('Ù…Ù†Ø§Ø³Ø¨Ø©')) return { icon: 'âœ…', key: 'suitable', css: 'suitable' };
        return { icon: 'â“', key: 'unknown', css: 'unknown' };
    };

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // IV. Ø¨Ù†Ø§Ø¡ Ø¹Ù†ØµØ± Ø§Ù„ÙˆØ¬Ø¨Ø© (buildMealItem)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    function buildMealItem(meal, lang) {
        const t = translations[lang] || translations.ar;
        const rawName = getMealName(meal, lang);
        const formattedName = formatMealName(rawName);
        const nutritionData = meal.Ø§Ù„Ù‚ÙŠÙ…Ø©_Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© || {};
        const medicalData = meal.Ø§Ù„ØªØ­Ù„ÙŠÙ„_Ø§Ù„Ø·Ø¨ÙŠ || [];

        const rawCaloriesValue = parseFloat(String(nutritionData.Ø§Ù„Ø³Ø¹Ø±Ø§Øª || '0').replace(/g/i, '').trim());
        const formattedCalories = isNaN(rawCaloriesValue) ? 'ØŸ' : Math.round(rawCaloriesValue);
        const rawCarbs = nutritionData.Ø§Ù„ÙƒØ±Ø¨ÙˆÙ‡ÙŠØ¯Ø±Ø§Øª || 'ØŸ';

        const medicalMap = {};
        medicalData.forEach(analysis => {
            const keyToStore = cleanDiseaseKey(analysis.Ø§Ù„Ø­Ø§Ù„Ø©_Ø§Ù„Ù…Ø±Ø¶ÙŠØ©.ar);
            medicalMap[keyToStore] = analysis;
        });

        const requiredDiseases = [
            { key: 'Ø§Ù„Ø³ÙƒØ±ÙŠ', localized: t.diabetes, css_class: 'diabetic' },
            { key: 'Ø§Ù„Ø¶ØºØ·', localized: t.pressure, css_class: 'pressure' },
            { key: 'Ø§Ù„Ø¯Ù‡Ù†ÙŠØ§Øª', localized: t.lipids, css_class: 'lipid' },
            { key: 'Ø§Ù„Ù†Ù‚Ø±Ø³', localized: t.gout, css_class: 'gout' },
            { key: 'Ø§Ù„ÙƒÙ„Ù‰', localized: t.kidney, css_class: 'kidney' }
        ];

        const getDiseaseBadge = (disease) => {
             const keyToSearch = cleanDiseaseKey(disease.key);
             const status = medicalMap[keyToSearch];
             const suitabilityTextAR = String(status ? status.Ø§Ù„Ù…Ù„Ø§Ø¡Ù…Ø©.ar : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ').trim();
             const { icon, key, css } = getSuitabilityInfo(suitabilityTextAR);
             const localizedText = t[key] || key;
            return `<span class="medical-badge ${disease.css_class} ${css}"><span class="badge-icon">${icon}</span><span class="badge-text">${disease.localized}: ${localizedText}</span></span>`;
        };

        const carbsContent = formatNutrientOrder('ğŸŒ¾', rawCarbs, t.carbs || '', lang);
        const fatContent = formatNutrientOrder('ğŸ§ˆ', nutritionData.Ø§Ù„Ø¯Ù‡ÙˆÙ† || 'ØŸ', t.fat || '', lang);
        const proteinContent = formatNutrientOrder('ğŸ’ª', nutritionData.Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ† || 'ØŸ', t.protein || '', lang);
        const isRTL = (lang === 'ar' || lang === 'fa');

        return `
            <div class="meal-item">
                <div class="meal-header">
                    <div class="meal-name-primary">${formattedName}</div>
                    <div class="meal-calories-main">
                        ${isRTL ?
                          `<span class="calories-value">${formattedCalories}</span><span class="calories-unit">${t.kcal}ğŸ”¥</span>` :
                          `<span class="calories-unit">${t.kcal}ğŸ”¥</span><span class="calories-value">${formattedCalories}</span>`
                        }
                    </div>
                    <span class="nutrition-badge carbs-header">${carbsContent}</span>
                </div>
                <div class="meal-nutrition-row">
                    <div class="nutrition-info-text-start">${t.ingredients_per_100g}</div>
                    <span class="nutrition-badge fat">${fatContent}</span>
                    <span class="nutrition-badge protein">${proteinContent}</span>
                </div>
                <div class="meal-medical">
                    ${getDiseaseBadge(requiredDiseases[4])} ${getDiseaseBadge(requiredDiseases[3])} ${getDiseaseBadge(requiredDiseases[2])} ${getDiseaseBadge(requiredDiseases[1])} ${getDiseaseBadge(requiredDiseases[0])}
                </div>
            </div>`;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // V. Ø¯ÙˆØ§Ù„ Ø¯ÙˆØ±Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙˆØ§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù…Ø¤Ù‚ØªØ§Øª
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    function initTicker() {
        if (typeof ANALYSED_MEALS_DATA === 'undefined') return;
        mealsData = getMeals(ANALYSED_MEALS_DATA);
        if (mealsData.length === 0) return;
        rebuildTicker();
        startMealCycle();
    }

    function rebuildTicker() {
        const track = document.getElementById('tickerTrack');
        if (!track || !mealsData.length) return;
        track.style.animation = 'none';
        let html = '';
        mealsData.forEach((meal, index) => {
            if (index > 0) html += createSeparator(index);
            html += buildMealItem(meal, currentLang);
        });
        const bridgeSeparator = createSeparator(mealsData.length);
        track.innerHTML = html + bridgeSeparator + html;
        track.classList.remove('ltr-scroll', 'rtl-scroll');
        const trackWidth = track.scrollWidth / 4;
        const tickerDuration = trackWidth / TIMING.TICKER_SPEED;
        track.style.setProperty('--ticker-duration', `${tickerDuration}s`);
        track.offsetHeight;
        if (currentLang === 'ar' || currentLang === 'fa') track.classList.add('ltr-scroll');
        else track.classList.add('rtl-scroll');
        track.style.animation = '';
    } // <-- ØªÙ… Ø¥Ø¶Ø§ÙØ© Ù‚ÙˆØ³ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† Ù†Ø§Ù‚ØµØ§Ù‹ Ù‡Ù†Ø§

    function startMealCycle() {
        if (!mealsData.length) return;
        currentIndex = 0;
        showCurrentMeal();
        const totalMealTime = TIMING.GAP_BETWEEN_MEALS * 5000;
        mealCycleInterval = setInterval(() => {
            currentIndex = (currentIndex + 1) % mealsData.length;
            showCurrentMeal();
        }, totalMealTime);
        startProgressBar(totalMealTime);
    }

    function restartMealCycle() {
        if (mealCycleInterval) clearInterval(mealCycleInterval);
        if (progressInterval) cancelAnimationFrame(progressInterval);
        currentIndex = 0;
        startMealCycle();
    }

    function showCurrentMeal() {
        const counterEl = document.getElementById('mealCounter');
        if (!counterEl) return;
        const quoteIndex = currentIndex % quotesData.length;
        const quoteText = quotesData[quoteIndex][currentLang] || quotesData[quoteIndex].ar;
        counterEl.textContent = quoteText;
    }

    function startProgressBar(totalTime) {
        const progressBar = document.getElementById('progressBar');
        let startTime = Date.now();
        if (progressInterval) cancelAnimationFrame(progressInterval);
        function updateProgress() {
            const elapsed = Date.now() - startTime;
            const cycleElapsed = elapsed % totalTime;
            const progress = (cycleElapsed / totalTime) * 100;
            if (progressBar) progressBar.style.width = `${progress}%`;
            progressInterval = requestAnimationFrame(updateProgress);
        }
        updateProgress();
    }

    window.onload = function() {
        loadSavedLanguage();
        setTimeout(initTicker, 500);
    };

    function openApp() {
        const frame = document.getElementById('appFrame');
        if (frame) {
            frame.style.opacity = '0';
            frame.style.transition = 'opacity 1s ease';
        }
        setTimeout(() => {
            window.location.href = `index_prompt1.html?lang=${currentLang}`;
        }, 1000);
    }
</script>
</body>
</html>

